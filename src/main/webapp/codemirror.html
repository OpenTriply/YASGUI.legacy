<!doctype html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Codemirror Test</title>
<script type="text/javascript">function showPlayButton(){};function setQueryType(){};</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<script src="assets/trie.js"></script>

<script src="assets/codemirror/codemirror.js"></script>
<script src="assets/codemirror/mode/xml/xml.js"></script>
<link rel="stylesheet" href="assets/codemirror/codemirror.css">
<link rel="stylesheet" href="assets/codemirror/theme/yasgui.css">
<!-- Autocompletion code -->
<link rel="stylesheet" href="assets/codemirror/addon/hint/show-hint.css">
<script src="assets/codemirror/addon/hint/show-hint.js"></script>
<script src="assets/yasguiHint.js"></script>
<!-- Highlight words onclick code -->
<script src="assets/codemirror/addon/search/searchcursor.js"></script>
<script src="assets/codemirror/addon/search/match-highlighter.js"></script>
<script src="assets/codemirror/addon/edit/matchbrackets.js"></script>
<script src="assets/codemirror/addon/runmode/runmode.js"></script>
<script src="assets/codemirror/util/formatting.js"></script>
<script src="assets/yasgui.js"></script>
<link rel="stylesheet" href="assets/yasgui.css">
<!-- Flint code for sparql mode -->
<script src="assets/flint/sparql.js"></script>
<link rel="stylesheet" href="assets/flint/sparql.css">
<!-- Code for adding custom keycombination/mouseclick commands to codemirror -->
<script src="assets/codemirrorHelper.js"></script>
  </head>
  <body>
  
<br><br>
	<textarea id="test" style="width:400px;height:300px;">
PREFIX abc: &lt;http://example.com/exampleOntology#&gt;
SELECT ?capital ?country
WHERE {
  ?x abc:cityname ?capital ;
     abc:isCapitalOf ?y .
  ?y abc:countryname ?country ;
     abc:isInContinent abc:Africa .
}
</textarea>

	<script type="text/javascript">
	function checkAdjustParent() {
		
	}
	function getCurrentEndpoint() {
		return "bla";
	}
	var properties = {};
	var propertiesArray = ["http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla2","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla","http://www.w3.org/1999/02/22-rdf-syntax-ns#bla", "http://www.w3.org/1999/02/22-rdf-syntax-ns#bld", "http://www.w3.org/1999/02/22-rdf-syntax-ns#45"];
	var T = new Trie();
    var i;
    for(i = 0; i < propertiesArray.length; i++) {
        T.insert(propertiesArray[i]);
        properties['bla'] = T;
    }
	var prefixes = ["aers: <bwah>", "aacbs: <sdf>", "aacds: <sdf>", "aaebs: <sdf>", "blaaa1: <sdf>", "blaaa2: <sdf>", "blaaa3: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aaebs: <sdf>", "aacbs: <sdf>", "rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>", "http: <htpp://bla>", "rdfs: <bwah>", "whereeee: <sdf>", "whereeec: <sdf>"];
				var modes;
		var myCodeMirror = CodeMirror.fromTextArea(document
				.getElementById("test"), {
			theme: "yasgui",
			mode: "sparql11",
			lineNumbers : true,
			highlightSelectionMatches: {showToken: /\w/},
			matchBrackets: true,
			gutters: ["gutterErrorBar","CodeMirror-linenumbers" ],
			extraKeys : {
				"Ctrl-Space" : "autocomplete",
				"Ctrl-D" : "deleteLines",
				"Ctrl-/" : "commentLines",
				"Ctrl-Alt-Down" : "copyLineDown",
				"Ctrl-Alt-Up" : "copyLineUp",
				"Ctrl-S" : "doNothing",
				"Shift-Ctrl-F": "doAutoFormat"
			}
		});
		myCodeMirror.on("change", function(cm, change){
			CodeMirror.showHint(cm, CodeMirror.allAutoCompletions, {closeCharacters: /(?=a)b/, closeOnUnfocus: false});
			appendPrefixIfNeeded(cm);
			checkSyntax(cm);
			setQueryType(cm.getStateAfter().queryType);
			checkAdjustParent();
		});
			
	</script>
</body>
</html>
